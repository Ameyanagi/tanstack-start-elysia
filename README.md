# init-tanstack-elysia

An [Agent Skill](https://agentskills.io) that scaffolds a full-stack monorepo with **TanStack Start + shadcn/ui** (frontend) and **ElysiaJS** (backend).

This repository contains the **skill definition** — not a project template. Agent Skills are reusable automation recipes for AI coding agents like [Claude Code](https://docs.anthropic.com/en/docs/claude-code). Install the skill, invoke it in an empty directory, and the agent builds the entire project for you.

## Install

```bash
npx skills add Ameyanagi/tanstack-start-elysia
```

Or install for Claude Code specifically:

```bash
npx skills add Ameyanagi/tanstack-start-elysia -a claude-code
```

## Usage

Navigate to an empty directory where you want the project created, then invoke the skill in Claude Code (or any compatible AI agent):

```
/init-tanstack-elysia
```

The agent scaffolds the project **in your current working directory**. When finished, you'll have a complete monorepo with:

- **Frontend**: TanStack Start + shadcn/ui (Mira style, Indigo theme) + Biome + tsc
- **Backend**: ElysiaJS + Better Auth (username + password) + Drizzle ORM (PostgreSQL)
- **API Client**: Eden Treaty for end-to-end type safety (no codegen)
- **Task Runner**: justfile with `dev`, `check`, `fix`, `test`, `gen-api`, `db-push`, `db-studio` commands
- **Production**: Docker multi-stage builds + docker-compose

## How It Works

The skill performs these steps automatically:

1. **Version Control** — initializes [Jujutsu](https://jj-vcs.github.io/jj/) alongside Git (colocated mode — both VCS tools work in the same directory)
2. **Frontend** — scaffolds TanStack Start via `shadcn create`, replaces ESLint/Prettier with Biome, adds Eden Treaty client and Better Auth client SDK
3. **Backend** — creates an ElysiaJS app with Better Auth (username + password), Drizzle ORM, Swagger docs, and CORS
4. **Database** — starts PostgreSQL via Docker, generates Better Auth schema, pushes to database via Drizzle Kit
5. **OpenAPI** — generates and validates OpenAPI spec from the Elysia app
6. **Tooling** — creates justfile, Docker configs, CI workflow, editor settings
7. **Verification** — runs `just check` (Biome + tsc + OpenAPI validation) and `just test`

## Prerequisites

**Required to run the skill:**

- [Bun](https://bun.sh) >= 1.2 — JavaScript runtime and package manager
- [just](https://github.com/casey/just) >= 1.0 — task runner
- [jj](https://jj-vcs.github.io/jj/) >= 0.25 — version control

The skill checks for these and stops if any are missing.

**Required to use the generated project:**

- [Docker](https://www.docker.com/) >= 24.0 — runs PostgreSQL for local development and production builds. The skill warns if Docker is missing but continues scaffolding. You'll need Docker before running `just dev` or any database operations.

Verify your setup:

```bash
bun --version      # >= 1.2
just --version     # >= 1.0
jj --version       # >= 0.25
docker --version   # >= 24.0 (optional for scaffolding)
```

## Generated Project Structure

```
<your-directory>/
├── package.json              # Root Bun workspace
├── bun.lock
├── justfile
├── frontend/
│   ├── app/                  # TanStack Start app directory
│   │   └── routes/
│   ├── src/
│   │   ├── lib/
│   │   │   ├── auth-client.ts  # Better Auth client SDK
│   │   │   ├── api.ts          # Eden Treaty client
│   │   │   └── utils.ts
│   │   ├── components/
│   │   │   └── ui/             # shadcn components
│   │   └── __tests__/
│   ├── biome.json
│   ├── vitest.config.ts
│   ├── tsconfig.json
│   ├── Dockerfile
│   ├── .dockerignore
│   └── package.json
├── backend/
│   ├── src/
│   │   ├── app.ts            # Elysia app (exports type for Eden)
│   │   ├── index.ts          # Entry point (app.listen)
│   │   ├── auth.ts           # Better Auth config
│   │   ├── db/
│   │   │   ├── index.ts      # Drizzle client
│   │   │   ├── schema.ts     # App-specific schema
│   │   │   └── auth-schema.ts # Generated by Better Auth CLI
│   │   └── routes/
│   │       └── health.ts
│   ├── scripts/
│   │   ├── generate-openapi.ts
│   │   └── validate-openapi.ts
│   ├── tests/
│   │   └── health.test.ts
│   ├── drizzle/              # Generated migrations
│   ├── drizzle.config.ts
│   ├── biome.json
│   ├── tsconfig.json
│   ├── openapi.json          # Generated OpenAPI spec
│   ├── Dockerfile
│   ├── .dockerignore
│   └── package.json
├── docker-compose.yml        # Production
├── docker-compose.dev.yml    # Dev (PostgreSQL)
├── .vscode/
│   ├── extensions.json
│   └── settings.json
├── .github/
│   └── workflows/
│       └── ci.yml
├── .editorconfig
├── .env.example
├── .env
├── .gitignore
└── README.md
```

## Next Steps

After the skill completes:

1. Edit `.env` and replace the placeholder `BETTER_AUTH_SECRET` with a strong random value
2. Start the dev environment (requires Docker):
   ```bash
   just dev
   ```
   This starts PostgreSQL, the frontend dev server, and the backend API.
3. Access the app:
   - Frontend: http://localhost:3000
   - Backend API: http://localhost:3001
   - Swagger docs: http://localhost:3001/docs
4. Browse the database:
   ```bash
   just db-studio
   ```

## Tooling Overview

| Concern    | Frontend               | Backend                  |
| ---------- | ---------------------- | ------------------------ |
| Runtime    | Bun                    | Bun                      |
| Framework  | TanStack Start         | ElysiaJS                 |
| Auth       | Better Auth client SDK | Better Auth server       |
| DB         | —                      | Drizzle ORM + PostgreSQL |
| Migrations | —                      | Drizzle Kit              |
| API Client | Eden Treaty            | —                        |
| Lint       | Biome                  | Biome                    |
| Format     | Biome                  | Biome                    |
| Typecheck  | tsc                    | tsc                      |
| Test       | Vitest                 | Bun test                 |

## Skill Source

This repository contains the skill definition files:

- [`skills/init-tanstack-elysia/SKILL.md`](skills/init-tanstack-elysia/SKILL.md) — step-by-step automation instructions
- [`skills/init-tanstack-elysia/references/stack-details.md`](skills/init-tanstack-elysia/references/stack-details.md) — all generated configuration file contents

**Stack documentation:** [TanStack Start](https://tanstack.com/start) | [shadcn/ui](https://ui.shadcn.com/) | [ElysiaJS](https://elysiajs.com/) | [Better Auth](https://www.better-auth.com/) | [Drizzle ORM](https://orm.drizzle.team/) | [Eden Treaty](https://elysiajs.com/eden/overview)

## License

[MIT](LICENSE)
